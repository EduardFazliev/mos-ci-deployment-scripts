- job:
    name: (9.0)create_param_environment_from_template
    parameters:
      # - string:
      #     name: FUELQA_TEMPLATE_NAME
      #     default:
      - string:
          name: ISO_DIR
          default: "/var/www/fuelweb-iso"
      - string:
          name: INTERFACE_MODEL
          default: "virtio"
      - string:
          name: DISABLE_SSL
          default: "TRUE"
      - string:
          name: FUEL_DEV_VER
          default: "2.9.19"
      - string:
          name: FUEL_QA_VER
          default: "master"
      - string:
          name: NOVA_QUOTAS_ENABLED
          default: "FALSE"
      - string:
          name: DEPLOYMENT_TIMEOUT
          default: "10000"
###############################
##### Temporary for tests #####
###############################
      - string:
          name: SNAPSHOT_NAME
          default: ha_deploy_VLAN_CINDER
###############################

    wrappers:
      - build-name:
          name: ${BUILD_NUMBER}.${FILE,path="build-name-setter.info"}
      - ansicolor

    builders:
        # - shell: |
        #     set -e
        #     ##### if template name is empty, then stop deploy process #####
        #     if [[ -z "$FUELQA_TEMPLATE_NAME" ]]; then
        #     exit 1
        #     fi

        - shell:
            !include-raw: ../shell_scripts/deploy_env_from_template.sh

    project-type: freestyle
    defaults: global
    node: Slave-srv134
    scm:
       - mos-ci-deployment-scripts
    description: 'Create environment with parameters, specified by PARAM string.'
    disabled: false
    display-name: 'Create Parameterized Environment'
    concurrent: true
    browser: githubweb
    retry-count: 3
    logrotate:
      daysToKeep: 20
      numToKeep: 200
      artifactDaysToKeep: -1
      artifactNumToKeep: -1
    publishers:
      - workspace-cleanup:
          fail-build: false
      - email:
          recipients: efazliev@mirantis.com
